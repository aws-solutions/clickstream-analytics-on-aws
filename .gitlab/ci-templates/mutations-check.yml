# ~~ Generated by projen. To modify, edit .projenrc.js and run "pnpm dlx projen".

stages:
  - build
mutations-check:
  stage: build
  rules:
    - if: $CI_MERGE_REQUEST_IID
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
  script:
    - npm install -g pnpm@8.15.3
    - pnpm install
    - pnpm projen
    - pnpm projen eslint
    - git add .
    - git diff --staged --patch --exit-code > .repo.patch || export mutations_happened=true
    - if [ "$mutations_happened" = "true" ]; then cat .repo.patch && exit 1; fi;
