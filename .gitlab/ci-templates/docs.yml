# ~~ Generated by projen. To modify, edit .projenrc.js and run "pnpm dlx projen".

pages:
  stage: deploy
  image:
    name: public.ecr.aws/docker/library/python:3.9
  before_script:
    - python3 -m pip install 'mkdocs<1.5' 'mkdocs-material<10' 'mkdocs-material-extensions<1.2' 'mkdocs-include-markdown-plugin<5' 'mkdocs-macros-plugin<1' 'mkdocs-glightbox<1'
  script:
    - mkdocs build -f ./docs/mkdocs.en.yml -s --site-dir ../public/en
    - mkdocs build -f ./docs/mkdocs.zh.yml -s --site-dir ../public/zh
    - cp -av ./docs/index.html ./public
  artifacts:
    paths:
      - public
  rules:
    - if: $CI_COMMIT_REF_NAME == $DOC_BRANCH
stages:
  - build
  - deploy
doc-build:
  stage: build
  image:
    name: public.ecr.aws/docker/library/python:3.9
  before_script:
    - python3 -m pip install 'mkdocs<1.5' 'mkdocs-material<10' 'mkdocs-material-extensions<1.2' 'mkdocs-include-markdown-plugin<5' 'mkdocs-macros-plugin<1' 'mkdocs-glightbox<1'
  script:
    - mkdocs build -f ./docs/mkdocs.en.yml -s
    - mkdocs build -f ./docs/mkdocs.zh.yml -s
  rules:
    - if: $CI_COMMIT_REF_NAME != $DOC_BRANCH
