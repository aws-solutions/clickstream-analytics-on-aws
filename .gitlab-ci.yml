# ~~ Generated by projen. To modify, edit .projenrc.js and run "pnpm dlx projen".

default:
  image: public.ecr.aws/docker/library/node:16-bullseye
  tags:
    - size:large
include:
  - local: .gitlab/ci-templates/build.yml
  - local: .gitlab/ci-templates/git-secrets-scan.yml
  - local: .gitlab/ci-templates/prlint.yml
  - local: .gitlab/ci-templates/docs.yml
  - local: .gitlab/ci-templates/semgrep.yml
  - local: .gitlab/ci-templates/license-check.yml
  - local: .gitlab/ci-templates/viperlight.yml
  - local: .gitlab/ci-templates/data-pipeline-spark-etl.yml
  - local: .gitlab/ci-templates/etl-plugin-samples.yml
  - local: .gitlab/ci-templates/mutations-check.yml
  - local: .gitlab/ci-templates/postbuild-scan.yml
  - local: .gitlab/ci-templates/cfn-nag.yml
  - local: .gitlab/ci-templates/cfn-lint.yml
workflow:
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
      when: always
    - if: $CI_COMMIT_REF_NAME == "main"
      when: always
    - when: never
stages:
  - .pre
  - build
  - deploy
  - qa
main:
  stage: .pre
  script:
    - echo Start PR Validation
    - env
